<h1>Create New Refset</h1>

<div class="panel panel-info ember-view fade in panelNoPadding">
    <div class="panel-heading accordion-toggle" data-toggle="collapse" data-parent="#accordion" data-target="#refsetHeader">
         <h4 class="panel-title">Refset Header</h4>
    </div>
    <div class="panel-collapse collapse in">
        <div id="refsetHeader" class="panel-body">

			<label>Are you importing a Published Refset? {{view 'toggle-switch' checkedBinding="doImportPublishedRefset"}}</label>

			<label class="control-label" for="description">Refset Description</label>
			{{textarea value=description}}
	
			<label class="control-label" for="languageCode">Language</label>
			{{view Em.Select 
			  contentBinding="languagesArray"
			  optionLabelPath="content.label" 
			  optionValuePath="content.id" 
			  valueBinding="languageCode" }}
	
			<label class="control-label" for="typeId">Refset Type</label>
			{{view Em.Select 
			  contentBinding="refsetTypesArray" 
			  optionLabelPath="content.label" 
			  optionValuePath="content.id" 
			  valueBinding="typeId" }}
	
			<label class="control-label" for="componentTypeId">Refset Components Type</label>
			{{view Em.Select 
			  contentBinding="componentTypesArray" 
			  optionLabelPath="content.label" 
			  optionValuePath="content.id" 
			  valueBinding="componentTypeId" }}
	
			<label class="control-label" for="moduleId">Module</label>
			{{view Em.Select 
			  contentBinding="moduleTypesArray" 
			  optionLabelPath="content.label" 
			  optionValuePath="content.id" 
			  valueBinding="moduleId" }}

	
			{{#if doImportPublishedRefset}}
					<label class="control-label" for="id">ID</label>
					<input id="id" name="id" placeholder="ID" type="text" {{bind-attr value="id"}}>
	
	
					<label class="control-label" for="created">Creation Date</label>
					<input id="created" name="created" placeholder="Created Date" type="text"  {{bind-attr value="created"}} data-provide="datepicker" data-date-format="MM d, yyyy">
	
					<label class="control-label" for="createdBy">Created By</label>
					<input id="createdBy" name="createdBy" placeholder="refset created by" type="text"  {{bind-attr value="createdBy"}}>
	
					<label class="control-label" for="publishedDate">Date Published</label>
					<input id="publishedDate" name="publishedDate" placeholder="Date Published" required="" type="text" {{bind-attr value="publishedDate"}} data-provide="datepicker">
			{{/if}}

		</div>
	</div>
</div>


<!-- This requires vendore/my_utilities/drag_drop_file_upload.js --->
<div class="panel panel-info ember-view fade in panelNoPadding">
    <div class="panel-heading accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion" data-target="#refsetMembers">
         <h4 class="panel-title">Import Members</h4>
    </div>
    <div class="panel-collapse collapse in">
        <div id="refsetMembers" class="panel-body collapse">
		            	
			<b>Import Members (flat file)</b>
			<p>To import members from a flat-file of concept IDs, either use the browse button to locate your file, or drag a file below.</p>
		
			<input type="file" id="refsetUploadFileInput" />
		
			<div id="fileUploadDropZone" class="fileUploadDropZone">Drop files here</div>
			
			<a href="/assets/temp/sample_refset.txt" target="_blank">Click here to download the latest sample refset file which you can use in the form above</a>
		
			{{#if getConceptDataInProgress}}
				{{#bs-panel heading="Importing member concepts" type="info"}}
					<img src="assets/img/googleballs-animated.gif">
					<p><b>Please wait...</b></p>
				{{/bs-panel}}
			{{else}}
				{{#if importError}}
					{{#bs-panel heading="Importing members failed" type="info"}}
						<p><b{{importError}}</b></p>
					{{/bs-panel}}
				{{else}}
					{{#if members}}
						{{#bs-panel heading="Member concepts to be imported" type="info" class="panelNoPadding"}}
							{{member-list members=members}}
						{{/bs-panel}}
					{{/if}}
				{{/if}}
			{{/if}}
		</div>
	</div>
</div>

<button {{action "initRefsetImport"}} class="btn btn-primary right">Create Refset</button>
