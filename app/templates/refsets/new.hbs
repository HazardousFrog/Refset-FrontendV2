<h1>Create New Refset</h1>

<div class="panel panel-info ember-view fade in panelNoPadding">
    <div class="panel-heading accordion-toggle" data-toggle="collapse" data-parent="#accordion" data-target="#refsetHeader">
         <h4 class="panel-title">Refset Header</h4>
    </div>
    <div class="panel-collapse collapse in">
        <div id="refsetHeader" class="panel-body">

			<label>Are you importing a Published Refset? {{view 'toggle-switch-inverted' checkedBinding="disablePublishedFormFields"}}</label>

			<form id="refsetEditForm" class="myForm">
				
				<table width="100%>
					
					<tr>
						<td class="content" colspan="4">
							<label class="control-label" for="description">Refset Description</label>
							{{textarea value=description}}
						</td>
					</tr>

					<tr>
						<td class="label">Language</td>
						<td class="content">{{view Em.Select 
							contentBinding="languagesArray"
							optionLabelPath="content.label"
							optionValuePath="content.id"
							valueBinding="languageCode"}}
			  			</td>
						<td class="label">Published Date</td><td class="content">				
						{{view Em.TextField 
							disabled=disablePublishedFormFields
							placeholder="Not Applicable"
						    valueBinding="meta.publishedDateInput"
							data-provide="datepicker"
							data-date-format="MM d, yyyy"
							data-date-clear-btn="true"
							data-date-autoclose="true"}}									
						</td>
					</tr>

					<tr>
						<td class="label">Refset Type</td>
						<td class="content">
							{{view Em.Select 
							  contentBinding="refsetTypesArray" 
							  optionLabelPath="content.label" 
							  optionValuePath="content.id" 
							  valueBinding="typeId"}}
						</td>
						<td class="label">Refset Members Type</td>
						<td class="content">
							{{view Em.Select 
							  contentBinding="componentTypesArray" 
							  optionLabelPath="content.label" 
							  optionValuePath="content.id" 
							  valueBinding="componentTypeId"}}
			  			</td>
					</tr>

					<tr>
						<td class="label">Creation Date</td>
						<td class="content">
							{{view Em.TextField 
								disabled=disablePublishedFormFields
								placeholder="Not Applicable"
							    valueBinding="meta.createdDateInput"
								data-provide="datepicker"
								data-date-format="MM d, yyyy"
								data-date-clear-btn="true"
								data-date-autoclose="true"}}
						</td>
						<td class="label">Module</td><td class="content">
							{{view Em.Select 
							  contentBinding="moduleTypesArray" 
							  optionLabelPath="content.label" 
							  optionValuePath="content.id" 
							  valueBinding="moduleId"}}
			  			</td>
					</tr>

					<tr>
						<td class="label">ID</td><td class="content" colspan=3>{{input type="text" value=id disabled=disablePublishedFormFields placeholder="Temporary ID will be auto-generated"}}</td>
					</tr>
				
				</table>
			</form>
		</div>
	</div>
</div>

<!-- This requires vendore/my_utilities/drag_drop_file_upload.js --->
<div class="panel panel-info ember-view fade in panelNoPadding">
    <div class="panel-heading accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion" data-target="#refsetMembers">
         <h4 class="panel-title">Import Members</h4>
    </div>
    <div class="panel-collapse collapse in">
        <div id="refsetMembers" class="panel-body collapse">
		            	
			<b>Import Members (flat file)</b>
			<p>To import members from a flat-file of concept IDs, either use the browse button to locate your file, or drag a file below.</p>
		
			<input type="file" id="refsetUploadFileInput" />
		
			<div id="fileUploadDropZone" class="fileUploadDropZone"><span id="droptext">Drop files here</span></div>
			
			<p><a href="/assets/temp/sample_refset.txt" target="_blank">Click here to download the latest sample refset file which you can use in the form above</a></p>
		
			{{#if getConceptDataInProgress}}
				{{#bs-panel heading="Importing member concepts" type="info"}}
					<img src="assets/img/googleballs-animated.gif">
					<p><b>Please wait...</b></p>
				{{/bs-panel}}
			{{else}}
				{{#if importError}}
					{{#bs-panel heading="Importing members failed" type="info"}}
						<p><b{{importError}}</b></p>
					{{/bs-panel}}
				{{else}}
					{{#if members}}
						{{#bs-panel heading="Member concepts to be imported" type="info" class="panelNoPadding"}}
							{{member-list members=members}}
						{{/bs-panel}}
					{{/if}}
				{{/if}}
			{{/if}}
		</div>
	</div>
</div>

<button {{action "clearForm"}} class="btn btn-default">Clear Form</button>
<button {{action "initRefsetImport"}} class="btn btn-primary right">Create Refset</button>
